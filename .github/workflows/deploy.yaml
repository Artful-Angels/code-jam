# GitHub Action Workflow to deploy the frontend.

name: Deploy
on:
  push:
    branches:
      - deploy

jobs:
  deploy_backend:
    name: Deploy backend
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2

    - name: Setup Git config
      run: |
        git config --local user.email "<>"
        git config --local user.name "Auto-Deploy"

    - name: Fetch and pull deploy branch
      run: |
        git fetch --unshallow
        git checkout deploy
        git pull

    - name: Git subtree push
      run: git subtree push --prefix backend origin deploy-backend
